@space-xs: 4px;
@space-sm: 8px;
@space-md: 16px;
@space-lg: 24px;
@space-xl: 32px;

@radius-sm: 6px;
@radius-md: 10px;

@shadow-1: 0 4px 14px rgba(0,0,0,.25);

:root {
  --color-bg: #0b0d12;
  --color-text: #ffffff;
  --color-subtle: rgba(255,255,255,0.7);
  --color-panel: rgba(0,0,0,0.45);
  --color-accent: #8bd3ff;
}

html {
  font-size: clamp(14px, 1.6vw, 18px);
}

body {
  line-height: 1.5;
}

.body-padding { padding: 2rem; }

.rules {
  padding: clamp(1rem, 3vw, 2rem);
  max-width: clamp(42rem, 86vw, 70rem);
  margin: 0 auto;

  h1 { font-size: clamp(1.8rem, 3.6vw, 2.6rem); margin: 0 0 clamp(0.75rem, 1.5vw, 1rem); }
  h2 { font-size: clamp(1.2rem, 2.4vw, 1.6rem); margin: clamp(1rem, 2vw, 1.2rem) 0 clamp(0.5rem, 1vw, 0.8rem); }
  p, li { font-size: clamp(1rem, 1.4vw, 1.125rem); color: var(--color-subtle); }
  ul, ol { padding-left: clamp(1rem, 2vw, 1.5rem); }
}

// Automatisch syspräf als mode übernehmen
.theme-auto {
  @media (prefers-color-scheme: dark) {
    --color-bg: #07090d;
    --color-text: #e9eef6;
    --color-subtle: rgba(233,238,246,0.75);
    --color-panel: rgba(255,255,255,0.06);
    --color-accent: #7ecbff;
  }
  @media (prefers-color-scheme: light) {
    --color-bg: #f6f8fb;
    --color-text: #0b0d12;
    --color-subtle: rgba(11,13,18,0.7);
    --color-panel: rgba(0,0,0,0.06);
    --color-accent: #005ea6;
  }
}

.theme-light {
  --color-bg: #f6f8fb;
  --color-text: #0b0d12;
  --color-subtle: rgba(11,13,18,0.7);
  --color-panel: rgba(0,0,0,0.06);
  --color-accent: #005ea6;
}

.theme-dark {
  --color-bg: #07090d;
  --color-text: #e9eef6;
  --color-subtle: rgba(233,238,246,0.75);
  --color-panel: rgba(255,255,255,0.06);
  --color-accent: #7ecbff;
}

// Layout
html, body { margin: 0; padding: 0; height: 100%; }
body {
  font-family: system-ui, -apple-system, "Segoe UI", Roboto, Ubuntu, Cantarell, "Noto Sans", Arial, "Apple Color Emoji", "Segoe UI Emoji";
  color: var(--color-text);
  background: var(--color-bg);
}
img { max-width: 100%; display: block; }

// BEM konvention
.game {
  min-height: 100dvh;
  display: grid;
  grid-template-rows: auto 1fr auto;
}

.game__header { padding: clamp(0.6rem, 1.2vw, 1rem) clamp(1rem, 2vw, 2rem); }

.game__title {
  margin: 0;
  font-size: clamp(22px, 2.6vw, 36px);
  letter-spacing: 0.5px;
  text-shadow: 0 2px 6px rgba(0,0,0,0.3);
}

.game__main.bg-ingame {
  background-position: center center;
  background-size: cover;
  background-repeat: no-repeat;

  min-height: 100dvh;
  min-height: 100svh;
  width: 100%;
}


/* Falls andere Regeln den Hintergrund „abschneiden“: Unterelemente dürfen wachsen */
.game__row, .game__section {
  min-height: 0;
}

// Scoreboard
.game__scoreboard {
  position: static;
}
.game__scoreboard .title {
  font-weight: 700;
  margin-bottom: @space-xs;
}

.game__scoreboard .score-grid {
  display: grid;
  grid-template-columns: 2fr 1fr 1fr;
  gap: clamp(0.25rem, 0.8vw, 0.6rem);
  column-gap: 10px;
  row-gap: 4px;
  align-items: center;
  font-weight: 700;
}
.game__scoreboard .hdr {
  color: var(--color-text);
  font-size: 0.9rem;
  font-weight: 700;
}

.game__scoreboard .val {
  font-variant-numeric: tabular-nums;
  text-align: right;
}

.game__row {
  display: grid;
  grid-template-columns: 1fr 2fr 1fr;
  gap: clamp(0.6rem, 1.6vw, 1rem);
  align-items: stretch;
}

// zu klein -> untereinander
@media (max-width: 800px) {
  .game__row {
    grid-template-columns: 1fr;
  }
}

.game__section--trump,
.game__section--scoreboard {
  justify-self: start;
  padding: @space-md;
  min-width: unset;
  min-height: auto;
}

.game__section {
  background: var(--color-panel);
  backdrop-filter: blur(4px);
  border-radius: @radius-md;
  box-shadow: @shadow-1;
  min-height: 120px;
  max-height: none;
  padding: clamp(0.75rem, 2vw, 1.25rem);
  display: flex;
  flex-direction: column;
}
.game__section .title {
  font-size: clamp(1rem, 1.8vw, 1.25rem);
  margin-bottom: clamp(0.4rem, 1vw, 0.6rem);
}

.game__section--scoreboard .game__scoreboard {
  position: static;
  top: auto; right: auto; left: auto; z-index: auto;
  backdrop-filter: none;
  padding: 0;
  min-width: unset;
  box-shadow: none;
  font-size: 0.9rem;
}

.game__cards {
  display: flex;
  flex-wrap: wrap;
  gap: clamp(0.4rem, 1.2vw, 0.8rem);
}

.game__hand .game__cards {
  justify-content: flex-start;
}

// einfliegen
.game__cards img {
  width: clamp(52px, 9vw, 140px);
  height: auto;
  object-fit: contain;
  filter: drop-shadow(0 2px 6px rgba(0,0,0,0.25));
  border-radius: @radius-sm;
  box-shadow: 0 2px 8px rgba(0,0,0,0.35);
  transform-origin: center bottom;
  transition: transform .15s ease, box-shadow .15s ease, filter .15s ease;
  animation: card-enter .80s ease-out both;
}
.game__cards img:hover {
  transform: translateY(-2px) scale(1.02);
  box-shadow: 0 8px 18px rgba(0,0,0,0.45);
  filter: brightness(1.05) saturate(1.02);
}

.game__section--trump .game__cards {
  justify-content: center;
}
.game__section--trump .game__cards img {
  height: clamp(90px, 14vh, 180px);
  width: auto;
}

[aria-label="Aktueller Stich"] .game__cards img {
  height: clamp(72px, 10vh, 150px);
  width: auto;
}

.game__header {
  display: flex;
  align-items: center;
  gap: 12px;
}

.theme-switch {
  margin-left: auto;
  background: transparent;
  color: var(--color-text);
  text-decoration: none;
}
.theme-switch:hover {
  background: rgba(255,255,255,.08);
}
.theme-light .theme-switch { border-color: rgba(0,0,0,.25); }
.theme-light .theme-switch:hover { background: rgba(0,0,0,.06); }

@keyframes card-enter {
  from { transform: translateY(6px); opacity: 0; }
  to   { transform: translateY(0);   opacity: 1; }
}

.game__hand {
  .player-name {
    font-weight: 700;
    margin-bottom: clamp(0.4rem, 1vw, 0.6rem);
  }
  .game__cards {
    justify-content: flex-start;
  }
}
.game__hand { min-height: auto; padding: clamp(0.5rem, 1.2vw, 0.9rem); }

.game__hand .player-name { font-weight: 600; margin-bottom: @space-sm; }

.game__footer { padding: clamp(0.6rem, 1.2vw, 1rem) clamp(1rem, 2vw, 2rem); color: var(--color-subtle); }

@media (max-width: 900px) {
  .game__row {
    grid-template-columns: 1fr;
    gap: clamp(0.8rem, 2vw, 1.25rem);
  }
}

@media (prefers-reduced-motion: reduce) {
  * { animation: none !important; transition: none !important; }
}

h1, .h1 { font-size: clamp(1.8rem, 4vw, 3rem); }
h2, .h2 { font-size: clamp(1.4rem, 3vw, 2.25rem); }
h3, .h3 { font-size: clamp(1.2rem, 2.2vw, 1.8rem); }
h4, .h4 { font-size: clamp(1.05rem, 1.8vw, 1.4rem); }

.btn {
  font-size: clamp(0.95rem, 1.2vw, 1.1rem);
  padding: clamp(0.55rem, 0.9vw, 0.8rem) clamp(1rem, 1.6vw, 1.5rem);
  border-radius: clamp(6px, 0.6vw, 12px);
}

.btn-lg {
  font-size: clamp(1.05rem, 1.5vw, 1.25rem);
  padding: clamp(0.7rem, 1.1vw, 1rem) clamp(1.2rem, 2vw, 2rem);
}

/* Obere 3er-Reihe: gleiche Breite links/rechts, Mitte doppelt; gleiche Höhe, sauberer Abstand nach unten */
.game__row {
  display: grid;
  grid-template-columns: 1fr 2fr 1fr;
  gap: clamp(0.6rem, 1.6vw, 1rem);
  align-items: stretch;
  margin-bottom: clamp(0.8rem, 2vw, 1.25rem); /* Abstand zu den Spielerhänden */
}

/* Trumpf/Scoreboard: keine Sonderausrichtung/-padding → symmetrisch */
.game__section--trump,
.game__section--scoreboard {
  justify-self: stretch; /* statt start */
  padding: inherit;      /* wie .game__section */
}

/* Sektionen füllen die Zeilenhöhe, Inhalt ordentlich stacken */
.game__section {
  height: 100%;
  display: flex;
  flex-direction: column;
}
.game__section .title { margin-bottom: clamp(0.4rem, 1vw, 0.6rem); }

.game__section.game__section--scoreboard .game__scoreboard {
  position: static !important;
}

/* Panel flacher halten */
.game__hand { min-height: auto; padding: clamp(0.5rem, 1.2vw, 0.9rem); }

/* Karten links beginnen (überschreibt evtl. frühere center-Regeln) */
.game__hand .game__cards { justify-content: flex-start; }

/* Top-Row: Mitte deutlich größer, Items nur so hoch wie Inhalt, Abstand nach unten */
.game__row {
  display: grid;
  grid-template-columns: 0.9fr 2.4fr 0.9fr; /* Mitte größer als Seiten */
  gap: clamp(0.6rem, 1.6vw, 1rem);
  align-items: start;                        /* nicht gleichhoch strecken */
  margin-bottom: clamp(1rem, 2.2vw, 1.5rem); /* Platz zu den Händen */
}

/* Seitenpanels (Trumpf/Scoreboard) kompakt halten */
.game__section--trump,
.game__section--scoreboard {
  justify-self: stretch;             /* symmetrisch mit der Mitte */
  padding: clamp(0.5rem, 1vw, 0.8rem);
  min-height: 0 !important;          /* überschreibt globale 120px */
}

/* Trumpfkarte: über Höhe steuern, Panel bleibt klein */
.game__section--trump .game__cards { justify-content: center; }
.game__section--trump .game__cards img {
  height: clamp(100px, 8vh, 99999px);
  width: auto !important;           /* nicht über Breite aufblasen */
}

/* Aktueller Stich: leicht größer als Trumpf, aber kompakt */
[aria-label="Aktueller Stich"] { padding: clamp(0.6rem, 1.2vw, 1rem); }
[aria-label="Aktueller Stich"] .game__cards img {
  height: clamp(100px, 11vh, 160px);
  width: auto !important;
}

/* Scoreboard sicher im normalen Flow (gegen Überlappungen) */
.game__section.game__section--scoreboard .game__scoreboard {
  position: static !important;
}

/* Hände: wirklich flach, eine Zeile, links beginnend, Höhe über die Karten steuern */
.game__hand {
  min-height: 0 !important;
  padding: clamp(0.4rem, 0.9vw, 0.75rem);
}
.game__hand .game__cards { justify-content: flex-start; gap: clamp(0.3rem, 0.8vw, 0.6rem); }

/* === HAND PANELS: Höhe ≈ Kartenhöhe, eine Zeile, Karten links === */
.game__hand {
  display: flex;                  /* Name + Karten nebeneinander */
  align-items: start;            /* vertikal an Kartenhöhe ausrichten */
  gap: clamp(0.4rem, 0.9vw, 0.75rem);
  padding: clamp(0.3rem, 0.7vw, 0.5rem);  /* sehr kompakt */
  min-height: 0 !important;      /* keine feste Mindesthöhe */
}

/* Spielernamen kompakt, ohne zusätzlichen Bottom-Margin */
.game__hand .player-name {
  margin: 0;                      /* kein Abstand nach unten */
  line-height: 3;                 /* klein halten */
  white-space: nowrap;            /* kein Zeilenumbruch im Namen */
}

/* Karten in EINER Zeile, ggf. horizontales Scrollen */
.game__hand .game__cards {
  display: flex;
  flex-wrap: nowrap;              /* verhindert das Umbrechen (keine zweite Zeile) */
  overflow-x: auto;               /* wenn zu viele Karten, dann scrollen */
  -webkit-overflow-scrolling: touch; /* smoother auf Mobile */
  gap: clamp(0.3rem, 0.8vw, 0.6rem);
  align-items: center;            /* vertikal an Kartenhöhe ausrichten */
}

/* Kartenhöhe definiert die Panelhöhe; Breite automatisch */
.game__hand .game__cards img {
  height: clamp(200px, 200vh, 400px);   /* Hand Karten Größe */
  width: auto !important;           /* überschreibt frühere width-Regeln */
}

.img-fluid {
  max-height: 145px !important;
  border-radius: 0.3em !important;
}

.switch__style {
  position: relative;
  width: 50px;
  height: 28px;
  border: none;
  border-radius: 50px;
  cursor: pointer;
  transition: background-color 0.3s;
  padding: 0;
}

.switch__style_span {
  position: absolute;
  top: 3px;
  width: 22px;
  height: 22px;
  background-color: white;
  border-radius: 50%;
  transition: left 0.3s;
  display: block;
}

@import "home.less";
@import "modify.less";