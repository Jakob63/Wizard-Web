@(implicit request: play.api.mvc.RequestHeader)

@main("Modify") {
  <main class="modify-page container py-4">
    <div class="row justify-content-center">
      <div class="col-12 col-lg-10">
        <h1 class="text-center mb-3">Spiel-Modifier</h1>
        <p class="lead text-center mb-4">
          Passe hier nur die Darstellung/Skalierung im UI an. Es wird keine echte Spiel-Logik verändert.
        </p>

        <section class="modifier-group">
          <h2 class="h4 text-center mb-3">Minus-Punkte</h2>
          <div class="slider-card">
            <div class="d-flex align-items-center justify-content-between mb-2">
              <label for="minusMultiplier" class="form-label mb-0">Multiplikator bei falschem Tipp</label>
              <output id="minusOut" class="value-pill" for="minusMultiplier">1.0×</output>
            </div>
            <input type="range"
                   class="form-range modifier-range"
                   id="minusMultiplier"
                   name="minusMultiplier"
                   min="0.5" max="3" step="0.5" value="1"
                   aria-describedby="minusHelp">
            <div id="minusHelp" class="form-text">Wähle z.B. 0,5×, 2×, 3× … für den Abzug.</div>
          </div>
        </section>

        <section class="modifier-group mt-4">
          <h2 class="h4 text-center mb-3">Plus-Punkte</h2>
          <div class="slider-card">
            <div class="d-flex align-items-center justify-content-between mb-2">
              <label for="plusMultiplier" class="form-label mb-0">Multiplikator bei richtigem Tipp</label>
              <output id="plusOut" class="value-pill" for="plusMultiplier">1.0×</output>
            </div>
            <input type="range"
                   class="form-range modifier-range"
                   id="plusMultiplier"
                   name="plusMultiplier"
                   min="1" max="3" step="0.5" value="1"
                   aria-describedby="plusHelp">
            <div id="plusHelp" class="form-text">Verdopple oder verdreifache die Punkte bei korrektem Guess.</div>
          </div>
        </section>

        <section class="modifier-group mt-4">
          <h2 class="h5 text-center mb-3">Weitere Ideen (nur UI)</h2>
          <div class="row g-3">
            <div class="col-12 col-md-6">
              <div class="slider-card h-100">
                <div class="d-flex align-items-center justify-content-between mb-2">
                  <label for="roundTime" class="form-label mb-0">Rundenzeit-Multiplikator</label>
                  <output id="roundTimeOut" class="value-pill" for="roundTime">1.0×</output>
                </div>
                <input type="range" class="form-range modifier-range" id="roundTime" min="0.5" max="2" step="0.25" value="1"
                       aria-describedby="roundTimeHelp">
                <div id="roundTimeHelp" class="form-text">Verkürze/verlängere Anzeigezeiten im UI.</div>
              </div>
            </div>
            <div class="col-12 col-md-6">
              <div class="slider-card h-100">
                <div class="d-flex align-items-center justify-content-between mb-2">
                  <label for="streakBonus" class="form-label mb-0">Streak-Bonus</label>
                  <output id="streakBonusOut" class="value-pill" for="streakBonus">0%</output>
                </div>
                <input type="range" class="form-range modifier-range" id="streakBonus" min="0" max="100" step="10" value="0"
                       aria-describedby="streakHelp">
                <div id="streakHelp" class="form-text">Zusätzlicher UI-Bonus in % für Serien.</div>
              </div>
            </div>
          </div>
        </section>

        <div class="text-center mt-4">
          <button id="resetBtn" type="button" class="btn btn-outline-secondary">Zurücksetzen</button>
        </div>

        <p class="small text-center text-body-secondary mt-3 mb-0">
          Hinweis: Diese Regler sind rein visuell. Die eigentliche Spiel-Logik bleibt unverändert.
        </p>
      </div>
    </div>
  </main>

  <script>
    (function() {
      const $ = (sel) => document.querySelector(sel);
      const setOut = (id, fmt) => {
        const el = $(id); if (!el) return;
        const out = $(id + 'Out');
        const update = () => { if (out) out.textContent = fmt(el.value); };
        el.addEventListener('input', update); update();
      };

      setOut('#minusMultiplier', v => parseFloat(v).toFixed(1) + '×');
      setOut('#plusMultiplier', v => parseFloat(v).toFixed(1) + '×');
      setOut('#roundTime', v => parseFloat(v).toFixed(2) + '×');
      setOut('#streakBonus', v => parseInt(v, 10) + '%');

      const resetBtn = document.getElementById('resetBtn');
      if (resetBtn) {
        resetBtn.addEventListener('click', () => {
          const defaults = {
            minusMultiplier: 1, plusMultiplier: 1, roundTime: 1, streakBonus: 0
          };
          for (const [id, val] of Object.entries(defaults)) {
            const el = document.getElementById(id);
            if (el) { el.value = String(val); el.dispatchEvent(new Event('input', { bubbles: true })); }
          }
        });
      }
    })();
  </script>
}