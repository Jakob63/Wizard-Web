@(title: String)(content: Html)(implicit request: play.api.mvc.RequestHeader)

@defining(request.cookies.get("theme").map(_.value).getOrElse("auto")) { theme =>
    @defining(request.path == controllers.routes.HomeController.home().url) { isHome =>
        @defining(if(isHome) "page-home" else "") { pageClass =>
            @defining(theme match { case "light" => "theme-light"; case "dark" => "theme-dark"; case _ => "theme-auto" }) { themeClass =>
                @defining(theme match { case "dark" => "Light Mode"; case _ => "Dark Mode" }) { toggleLabel =>

                <!DOCTYPE html>
                    <html lang="de" data-bs-theme="@theme">
                        <head>
                            <meta charset="utf-8">
                            <meta name="viewport" content="width=device-width, initial-scale=1">
                            <title>@title</title>
                                <!-- Bootstrap -->
                            <link href="https://cdn.jsdelivr.net/npm/bootstrap@@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
                                <!-- Play -->
                            <link rel="stylesheet" media="screen" href='@controllers.routes.Assets.versioned("stylesheets/main.css")'>
                                <!-- Schriftart -->
                            <link href="https://fonts.googleapis.com/css2?family=Cinzel+Decorative:wght@@400;700;900&display=swap" rel="stylesheet">
                        </head>
                        <body class="game @themeClass @pageClass">
                            <header class="game__header">
                                <nav class="navbar navbar-expand-lg bg-body-tertiary">
                                    <div class="container-fluid">
                                        <a class="navbar-brand" href="http://localhost:9000/home">
                                            <div class="home-hero__title" style="font-size: clamp(3rem, 1vw, 3rem) !important; margin: 0 0 0 0;" data-text="W">W</div>
                                        </a>
                                        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                                            <span class="navbar-toggler-icon"></span>
                                        </button>
                                        <div class="collapse navbar-collapse" id="navbarSupportedContent">
                                            <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                                                <li class="nav-item">
                                                    <a class="nav-link active" aria-current="page" href="http://localhost:9000/rules">Rules</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a class="nav-link active" href="http://localhost:9000/modify">Modify</a>
                                                </li>
                                                <li class="nav-item">
                                                    <a class="nav-link active" href='@controllers.routes.ThemeController.toggleTheme(returnTo = request.uri)' class="btn btn-outline-secondary">
                                                        <button type="button"
                                                        class="btn btn-outline-secondary"
                                                        style="
                                                            position: relative;
                                                            width: 50px;
                                                            height: 28px;
                                                            background-color: @if(toggleLabel == "Light Mode"){#0d6efd}else{#ccc};
                                                            border: none;
                                                            border-radius: 50px;
                                                            cursor: pointer;
                                                            transition: background-color 0.3s;
                                                            padding: 0;
                                                            ">
                                                            <span style="
                                                                position: absolute;
                                                                top: 3px;
                                                                left: @if(toggleLabel == "Light Mode"){24px}else{3px};
                                                                width: 22px;
                                                                height: 22px;
                                                                background-color: white;
                                                                border-radius: 50%;
                                                                transition: left 0.3s;
                                                                display: block;
                                                            "></span>
                                                        </button>
                                                    @toggleLabel
                                                    </a>
                                                </li>
                                            </ul>
                                        </div>

                                    </div>
                                </nav>

                            </header>

                            @content

                            <script src="https://cdn.jsdelivr.net/npm/bootstrap@@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
                        </body>
                    </html>

                }
            }
        }
    }
}